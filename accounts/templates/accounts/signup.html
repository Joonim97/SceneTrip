{% extends 'base.html' %}

{% block title %}
회원가입
{% endblock %}

{% block content %}
<div class="container mt-5">
  <h2>회원가입</h2> <h3>회원가입 완료 후 이메일 인증을 받아주세요</h3>
  <form method="post">
    {% csrf_token %}
    <!-- 사용자 이름 (username) -->
    <div class="mb-3">
      <label for="username" class="form-label">사용자 이름</label>
      <input type="text" class="form-control" id="username" name="username" required>
    </div>

    <!-- 아이디 (user_id) -->
    <div class="mb-3">
      <label for="user_id" class="form-label">아이디</label>
      <input type="text" class="form-control" id="user_id" name="user_id" required>
    </div>

    <!-- 비밀번호 (password) -->
    <div class="mb-3">
      <label for="password" class="form-label">비밀번호</label>
      <input type="password" class="form-control" id="password" name="password" required>
    </div>

    <!-- 닉네임 (nickname) -->
    <div class="mb-3">
      <label for="nickname" class="form-label">닉네임</label>
      <input type="text" class="form-control" id="nickname" name="nickname" required>
    </div>

    <!-- 이메일 (email) -->
    <div class="mb-3">
      <label for="email" class="form-label">이메일</label>
      <input type="email" class="form-control" id="email" name="email" required>
    </div>

    <!-- 생년월일 (birth_date) -->
    <div class="mb-3">
      <label for="birth_date" class="form-label">생년월일</label>
      <input type="date" class="form-control" id="birth_date" name="birth_date" required>
    </div>

    <!-- 성별 (gender) -->
    <div class="mb-3">
      <label for="gender" class="form-label">성별</label>
      <select class="form-control" id="gender" name="gender" required>
        <option value="male">남성</option>
        <option value="female">여성</option>
        <option value="other">None</option>
      </select>
    </div>

    <!-- 등급 (grade) -->
    <div class="mb-3">
      <label for="grade" class="form-label">등급 (저널리스트 활동을 원하시는 분은 저널리스트를 선택 후 가입해주시면 관리자의 승인 후 권한이 부여됩니다!)</label>
      <select class="form-control" id="grade" name="grade" required>
        <option value="normal">일반 사용자</option>
        <option value="author">저널리스트</option>
      </select>
    </div>

    <button type="submit" class="btn btn-primary">회원가입</button> 
  </form>
</div>

<!-- 팝업(모달) 추가 -->
{% if messages %}
<div id="message-popup" class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">알림</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        {% for message in messages %}
        alert('{{ message }}');
        {% endfor %}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">확인</button>
      </div>
    </div>
  </div>
</div>
{% endif %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const messagePopupElement = document.getElementById('message-popup');
    //if (messagePopupElement) {
      const messagePopup = new bootstrap.Modal(messagePopupElement);
      messagePopup.show();
   // }
  });
</script>
{% endblock %}